import{R as t,r as N,d as b}from"./app.d2c20d4d.js";import{d as H,A as J,a as K,b as Q,C as W,c as Y,E as Z,L as j}from"./helpers.dc590478.js";const ee=({jogo:n,list:m,handleClose:w})=>{var i,h;const E=(s,c,r)=>{let o="w-[30%] text-center rounded-md";const C=s!==null,k=c!==null,P=r&&r.palpite_casa!==null,p=r&&r.palpite_fora!==null;if(C&&k&&P&&p){const x=r.palpite_casa,f=r.palpite_fora,g=s===r.palpite_casa,S=c===r.palpite_fora,_=s>c&&x>f,y=c>s&&f>x;g&&S?o+=" bg-green-100 dark:bg-green-400 dark:text-slate-800":(_||y||s===c&&x===f)&&(o+=" bg-yellow-50 dark:bg-yellow-500 dark:text-slate-800")}return o};return t.createElement("div",{className:"absolute grid place-content-center inset-0 w-full h-screen bg-[#000000bf] z-[100]"},t.createElement("div",{className:"w-[90vw] sm:w-[600px] bg-white dark:bg-slate-800 shadow-md rounded-t-xl rounded-b-lg text-gray-600 dark:text-slate-300"},t.createElement("h1",{className:"flex justify-between font-bold text-xl text-center bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-t-lg"},t.createElement("span",{className:""}),t.createElement("span",{className:"flex items-center justify-center"},`${((i=n==null?void 0:n.timecasa)==null?void 0:i.nome)||""} vs ${((h=n==null?void 0:n.timefora)==null?void 0:h.nome)||""}`),t.createElement("span",{className:""},t.createElement("button",{onClick:()=>w(null),className:"p-2 bg-gray-100 rounded-[50%] text-slate-800"},H))),t.createElement("ul",{className:"h-[80vh] divide-y overflow-y-auto py-2 px-4"},m.map((s,c)=>t.createElement("li",{key:c,className:"flex justify-between p-2 font-bold border-gray-700"},t.createElement("div",{className:"w-[10%]"},c+1),t.createElement("div",{className:"w-[60%]"},s.user.name),t.createElement("div",{className:E(n.placar_casa,n.placar_fora,s)},s.palpite_casa," x ",s.palpite_fora))))))},se=({user:n,bolao:m,compare:w,jogos:E,rodada:i,participantes:h,selected:s})=>{const[c,r]=N.exports.useState(!1),[o,C]=N.exports.useState(!1),[k,P]=N.exports.useState(!1),[p,x]=N.exports.useState({jogo:0,casa:null,fora:null}),f=N.exports.useRef(),g=(e,a)=>{(p.jogo===0||a.id===p.jogo)&&x({...p,jogo:a.id,[e.target.name.split("_")[1]]:+e.target.value})},S=e=>{if(e.target.value>0){let a=`/palpites?participante=${e.target.value}`;window.location.search.includes("rodada")&&(a+=`&rodada=${i}`),b.Inertia.get(a,{},{preserveScroll:!0})}},_=(e,a)=>{a.id===p.jogo&&p.casa!==null&&p.fora!==null&&R(a)},y=e=>{e?(P(e),b.Inertia.get(`/palpites?rodada=${i}&compare=${e.id}`,{},{preserveState:!0})):b.Inertia.get(`/palpites?rodada=${i}`)},T=()=>{C(!o),!o&&m.rodada>16&&setTimeout(()=>{f.current.scrollTo({top:48*(m.rodada/4),behavior:"smooth"})},500)},F=e=>{if(e>0){let a=`/palpites?rodada=${e}`;C(!1),window.location.search.includes("participante")&&(a+=`&participante=${s}`),b.Inertia.get(a,{},{preserveScroll:!0})}},R=e=>{const a={jogo_id:e.id,user_id:n.id,inicio_jogo:e.inicio,palpite_casa:p.casa,palpite_fora:p.fora};e.palpite?b.Inertia.visit(`/palpites/${e.palpite.id}`,{method:"PUT",data:a,preserveScroll:!0,onStart:()=>r(!0),onFinish:()=>r(!1)}):b.Inertia.visit("/palpites",{method:"POST",data:a,preserveScroll:!0,onStart:()=>r(!0),onFinish:()=>r(!1)})},I=({palpite:e,inicio_timestamp:a})=>{const l=e&&e.palpite_casa!==null,u=e&&e.palpite_fora!==null;return!!(!l&&!u&&v(a))},q=({palpite:e},a)=>{const l=n.id===+s,u=e===null||e[`palpite_${a}`]===null;return l&&u},v=e=>new Date().getTime()>e*1e3,D=e=>{if(n.id===+s&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if((a||l)&&!v(e.inicio_timestamp))return!0}return!1},L=e=>{if(n.id===+s&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if(a&&l&&v(e.inicio_timestamp))return!0}return!1},z=({placar_casa:e,placar_fora:a,palpite:l})=>{const u=e!==null,d=a!==null,B=l&&l.palpite_casa!==null,X=l&&l.palpite_fora!==null;if(u&&d&&B&&X){const A=l.palpite_casa,$=l.palpite_fora,O=e===l.palpite_casa,U=a===l.palpite_fora,V=e>a&&A>$,M=a>e&&$>A,G=e===a&&A===$;if(O&&U)return"flex flex-col gap-1 bg-green-100 dark:bg-green-400 dark:text-slate-800";if(V||M||G)return"flex flex-col gap-1 bg-yellow-50 dark:bg-yellow-500 dark:text-slate-800"}else return"flex flex-col gap-1"};return t.createElement(t.Fragment,null,t.createElement("div",{className:"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 overflow-hidden shadow-sm sm:rounded-lg"},(E.length>0||i>0)&&t.createElement("div",{className:"flex flex-wrap-reverse items-center justify-between"},t.createElement("div",null,t.createElement("div",{className:o?"vb-btn-group open":"vb-btn-group"},t.createElement("button",{onClick:()=>F(+i-1),disabled:+i==1},J),t.createElement("button",{onClick:T},t.createElement("span",{className:"flex items-center justify-center"},i,"\xAA Rodada ",K)),t.createElement("button",{onClick:()=>F(+i+1),disabled:m.qtd_rodadas===+i},Q)),o&&t.createElement("div",{ref:f,className:"vb-dropdown"},[...Array(m.qtd_rodadas).keys()].map((e,a)=>t.createElement("button",{key:a,onClick:()=>F(e+1),className:m.rodada===e+1?"active":""},e+1,"\xAA")))),t.createElement("div",{className:"w-[18.5rem] p-3 pb-0 sm:px-6 sm:pt-6"},t.createElement("select",{name:"users",onChange:S,defaultValue:s,className:"vb-custom-input dark:bg-slate-800"},h.map((e,a)=>t.createElement("option",{key:a,value:e.user_id},e.name))))),E.length>0?t.createElement("div",{className:"p-3 sm:p-6 border-gray-200"},t.createElement("div",{className:"flex justify-between flex-row border-b-2 p-2 font-bold bg-slate-800 dark:bg-slate-900 text-white rounded-t-lg dark:border-slate-500"},t.createElement("div",{className:"px-2 text-center"},"Status"),t.createElement("div",{className:"px-2 flex text-center truncate"},"Palpites"),t.createElement("div",{className:"px-2 text-center"},"A\xE7\xF5es")),E.map((e,a)=>{var l,u;return t.createElement("div",{key:a,className:z(e)},t.createElement("div",{className:"flex text-sm justify-center pt-2 gap-1"},t.createElement("strong",{className:"capitalize"},c?t.createElement("strong",{className:"capitalize"},"Salvando..."):t.createElement("strong",{className:"capitalize"},`${m.termino} 23:59:00`==e.inicio?"DATA INDEFINIDA":e.inicio_format))),t.createElement("div",{className:"flex px-2 items-center justify-between border-b-2 pb-2 gap-2 dark:border-slate-500"},t.createElement("div",{className:"text-center"},e.palpite&&(e.palpite.palpite_casa!==null||e.palpite.palpite_fora!==null)?W:Y),t.createElement("div",{className:"flex items-center justify-center gap-2"},t.createElement("div",{className:"flex items-center gap-2"},t.createElement("span",{className:"vb-sigla-time"},e.timecasa.sigla),t.createElement("span",{className:"w-28 hidden sm:flex justify-end truncate"},e.timecasa.nome),t.createElement("img",{alt:e.timecasa.nome,className:"vb-escudo-time",src:e.timecasa.escudo_url})),t.createElement("div",{className:"flex items-center gap-2"},q(e,"casa")?t.createElement("input",{min:"0",type:"number",name:"palpite_casa",className:"vb-input-jogos",onBlur:d=>_(d,e),disabled:c||I(e),onChange:d=>g(d,e)}):t.createElement("span",{className:"vb-placar-number"},n.id!==+s&&!v(e.inicio_timestamp)?e.palpite?"X":"":(l=e==null?void 0:e.palpite)==null?void 0:l.palpite_casa),t.createElement("span",null,"x"),n.id===+s&&I(e)&&t.createElement("strong",{className:"vb-expired"},"Esgotado!"),q(e,"fora")?t.createElement("input",{min:"0",type:"number",name:"palpite_fora",className:"vb-input-jogos",onBlur:d=>_(d,e),disabled:c||I(e),onChange:d=>g(d,e)}):t.createElement("span",{className:"vb-placar-number"},n.id!==+s&&!v(e.inicio_timestamp)?e.palpite?"X":"":(u=e==null?void 0:e.palpite)==null?void 0:u.palpite_fora)),t.createElement("div",{className:"flex items-center gap-2"},t.createElement("img",{alt:e.timefora.nome,className:"vb-escudo-time",src:e.timefora.escudo_url}),t.createElement("span",{className:"w-28 hidden sm:flex truncate"},e.timefora.nome),t.createElement("span",{className:"vb-sigla-time"},e.timefora.sigla))),t.createElement("div",{className:"w-6"},D(e)&&t.createElement("button",{onClick:()=>R(e)},Z),L(e)&&t.createElement("button",{onClick:()=>y(e)},j))))}),t.createElement("div",{className:"pt-9"},t.createElement("h4",{className:"font-bold text-lg pb-1"},"Legenda"),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-green-100 dark:bg-green-400 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Exato (",m.placar_exato," pontos)")),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-yellow-50 dark:bg-yellow-500 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Vencedor (",m.placar_vencedor," pontos)")))):t.createElement("div",{id:"box-empty"},"N\xE3o existem dados para listar!")),w.length>0&&t.createElement(ee,{jogo:k,list:w,handleClose:y}))};export{se as default};
