import{r as x,R as t,d}from"./app.44de94f0.js";import{A as J,a as K,b as M,C as Q,c as W,E as Y,L as Z,d as j}from"./helpers.fa8c5bea.js";const ae=({user:m,bolao:u,compare:_,jogos:E,rodada:s,participantes:A,selected:r})=>{var F,$;const[b,f]=x.exports.useState(!1),[v,y]=x.exports.useState(!1),[p,L]=x.exports.useState(!1),[i,R]=x.exports.useState({jogo:0,casa:null,fora:null}),C=(e,a)=>{(i.jogo===0||a.id===i.jogo)&&R({...i,jogo:a.id,[e.target.name.split("_")[1]]:+e.target.value})},q=e=>{if(e.target.value>0){let a=`/palpites?participante=${e.target.value}`;window.location.search.includes("rodada")&&(a+=`&rodada=${s}`),d.Inertia.get(a,{},{preserveScroll:!0})}},k=(e,a)=>{a.id===i.jogo&&i.casa!==null&&i.fora!==null&&P(a)},S=e=>{e?(L(e),d.Inertia.get(`/palpites?rodada=${s}&compare=${e.id}`,{},{preserveState:!0})):d.Inertia.get(`/palpites?rodada=${s}`)},N=e=>{if(e>0){let a=`/palpites?rodada=${e}`;y(!1),window.location.search.includes("participante")&&(a+=`&participante=${r}`),d.Inertia.get(a,{},{preserveScroll:!0})}},P=e=>{const a={jogo_id:e.id,user_id:m.id,inicio_jogo:e.inicio,palpite_casa:i.casa,palpite_fora:i.fora};e.palpite?d.Inertia.visit(`/palpites/${e.palpite.id}`,{method:"PUT",data:a,preserveScroll:!0,onStart:()=>f(!0),onFinish:()=>f(!1)}):d.Inertia.visit("/palpites",{method:"POST",data:a,preserveScroll:!0,onStart:()=>f(!0),onFinish:()=>f(!1)})},w=({palpite:e,inicio_timestamp:a})=>{const l=e&&e.palpite_casa!==null,c=e&&e.palpite_fora!==null;return!!(!l&&!c&&o(a))},I=({palpite:e},a)=>{const l=m.id===+r,c=e===null||e[`palpite_${a}`]===null;return l&&c},o=e=>new Date().getTime()>e*1e3,T=e=>{if(m.id===+r&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if((a||l)&&!o(e.inicio_timestamp))return!0}return!1},B=e=>{if(m.id===+r&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if(a&&l&&o(e.inicio_timestamp))return!0}return!1},D=({placar_casa:e,placar_fora:a,palpite:l})=>{const c=e!==null,n=a!==null,X=l&&l.palpite_casa!==null,z=l&&l.palpite_fora!==null;if(c&&n&&X&&z){const h=l.palpite_casa,g=l.palpite_fora,U=e===l.palpite_casa,V=a===l.palpite_fora,O=e>a&&h>g,G=a>e&&g>h,H=e===a&&h===g;if(U&&V)return"flex flex-col gap-1 bg-green-100 dark:bg-green-400 dark:text-slate-800";if(O||G||H)return"flex flex-col gap-1 bg-yellow-50 dark:bg-yellow-500 dark:text-slate-800"}else return"flex flex-col gap-1"};return t.createElement(t.Fragment,null,t.createElement("div",{className:"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 overflow-hidden shadow-sm sm:rounded-lg"},(E.length>0||s>0)&&t.createElement("div",{className:"flex flex-wrap-reverse items-center justify-between"},t.createElement("div",null,t.createElement("div",{className:v?"vb-btn-group open":"vb-btn-group"},t.createElement("button",{onClick:()=>N(+s-1),disabled:+s==1},J),t.createElement("button",{onClick:()=>y(!v)},t.createElement("span",{className:"flex items-center justify-center"},s,"\xAA Rodada ",K)),t.createElement("button",{onClick:()=>N(+s+1),disabled:u.qtd_rodadas===+s},M)),v&&t.createElement("div",{className:"vb-dropdown"},[...Array(u.qtd_rodadas).keys()].map((e,a)=>t.createElement("button",{key:a,onClick:()=>N(e+1)},e+1,"\xAA")))),t.createElement("div",{className:"w-[18.5rem] p-3 pb-0 sm:px-6 sm:pt-6"},t.createElement("select",{name:"users",onChange:q,defaultValue:r,className:"vb-custom-input dark:bg-slate-800"},A.map((e,a)=>t.createElement("option",{key:a,value:e.user_id},e.name))))),E.length>0?t.createElement("div",{className:"p-3 sm:p-6 border-gray-200"},t.createElement("div",{className:"flex justify-between flex-row border-b-2 p-2 font-bold bg-slate-800 dark:bg-slate-900 text-white rounded-t-lg dark:border-slate-500"},t.createElement("div",{className:"px-2 text-center"},"Status"),t.createElement("div",{className:"px-2 flex text-center truncate"},"Palpites"),t.createElement("div",{className:"px-2 text-center"},"A\xE7\xF5es")),E.map((e,a)=>{var l,c;return t.createElement("div",{key:a,className:D(e)},t.createElement("div",{className:"flex text-sm justify-center pt-2 gap-1"},t.createElement("strong",{className:"capitalize"},b?"Salvando...":e.inicio_format)),t.createElement("div",{className:"flex px-2 items-center justify-between border-b-2 pb-2 gap-2 dark:border-slate-500"},t.createElement("div",{className:"text-center"},e.palpite&&(e.palpite.palpite_casa!==null||e.palpite.palpite_fora!==null)?Q:W),t.createElement("div",{className:"flex items-center justify-center gap-2"},t.createElement("div",{className:"flex items-center gap-2"},t.createElement("span",{className:"vb-sigla-time"},e.timecasa.sigla),t.createElement("span",{className:"w-28 hidden sm:flex justify-end truncate"},e.timecasa.nome),t.createElement("img",{alt:e.timecasa.nome,className:"vb-escudo-time",src:e.timecasa.escudo_url})),t.createElement("div",{className:"flex items-center gap-2"},I(e,"casa")?t.createElement("input",{min:"0",type:"number",name:"palpite_casa",className:"vb-input-jogos",onBlur:n=>k(n,e),disabled:b||w(e),onChange:n=>C(n,e)}):t.createElement("span",{className:"vb-placar-number"},m.id!==+r&&!o(e.inicio_timestamp)?e.palpite?"X":"":(l=e==null?void 0:e.palpite)==null?void 0:l.palpite_casa),t.createElement("span",null,"x"),m.id===+r&&w(e)&&t.createElement("strong",{className:"vb-expired"},"Esgotado!"),I(e,"fora")?t.createElement("input",{min:"0",type:"number",name:"palpite_fora",className:"vb-input-jogos",onBlur:n=>k(n,e),disabled:b||w(e),onChange:n=>C(n,e)}):t.createElement("span",{className:"vb-placar-number"},m.id!==+r&&!o(e.inicio_timestamp)?e.palpite?"X":"":(c=e==null?void 0:e.palpite)==null?void 0:c.palpite_fora)),t.createElement("div",{className:"flex items-center gap-2"},t.createElement("img",{alt:e.timefora.nome,className:"vb-escudo-time",src:e.timefora.escudo_url}),t.createElement("span",{className:"w-28 hidden sm:flex truncate"},e.timefora.nome),t.createElement("span",{className:"vb-sigla-time"},e.timefora.sigla))),t.createElement("div",{className:"w-6"},T(e)&&t.createElement("button",{onClick:()=>P(e)},Y),B(e)&&t.createElement("button",{onClick:()=>S(e)},Z))))}),t.createElement("div",{className:"pt-9"},t.createElement("h4",{className:"font-bold text-lg pb-1"},"Legenda"),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-green-100 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Exato (",u.placar_exato," pontos)")),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-yellow-50 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Vencedor (",u.placar_vencedor," pontos)")))):t.createElement("div",{id:"box-empty"},"N\xE3o existem dados para listar!")),_.length>0&&t.createElement("div",{className:"absolute grid place-content-center inset-0 w-full h-screen bg-[#000000bf] z-[100]"},t.createElement("div",{className:"w-[90vw] sm:w-[600px] bg-white dark:bg-slate-800 shadow-md rounded-t-xl rounded-b-lg text-gray-600 dark:text-slate-300"},t.createElement("h1",{className:"flex justify-between font-bold text-xl text-center bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-t-lg"},t.createElement("span",{className:""}),t.createElement("span",{className:"flex items-center justify-center"},`${((F=p==null?void 0:p.timecasa)==null?void 0:F.nome)||""} vs ${(($=p==null?void 0:p.timefora)==null?void 0:$.nome)||""}`),t.createElement("span",{className:""},t.createElement("button",{className:"p-2 bg-gray-100 rounded-[50%] text-slate-800",onClick:()=>S(null)},j))),t.createElement("ul",{className:"h-[80vh] divide-y overflow-y-auto py-2 px-4"},_.map((e,a)=>t.createElement("li",{key:a,className:"flex justify-between py-2"},t.createElement("div",{className:"w-[10%]"},a+1),t.createElement("div",{className:"w-[60%]"},e.user.name),t.createElement("div",{className:"w-[30%] text-center"},e.palpite_casa," x ",e.palpite_fora)))))))};export{ae as default};
