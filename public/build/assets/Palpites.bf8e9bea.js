import{r as E,R as t,d}from"./app.a84cc58c.js";import{A as J,a as K,b as M,C as Q,c as W,E as Y,L as Z,d as j}from"./helpers.5de7201d.js";const ae=({user:c,bolao:u,compare:y,jogos:x,rodada:m,participantes:$,selected:n})=>{var A,k;const[b,f]=E.exports.useState(!1),[v,C]=E.exports.useState(!1),[p,L]=E.exports.useState(!1),[i,R]=E.exports.useState({jogo:0,casa:null,fora:null}),g=(e,a)=>{(i.jogo===0||a.id===i.jogo)&&R({...i,jogo:a.id,[e.target.name.split("_")[1]]:+e.target.value})},q=e=>{if(e.target.value>0){let a=`/palpites?participante=${e.target.value}`;window.location.search.includes("rodada")&&(a+=`&rodada=${m}`),d.Inertia.get(a,{},{preserveScroll:!0})}},S=(e,a)=>{a.id===i.jogo&&i.casa!==null&&i.fora!==null&&I(a)},P=e=>{e?(L(e),d.Inertia.get(`/palpites?compare=${e.id}`,{},{preserveState:!0})):d.Inertia.get("/palpites")},N=e=>{if(e>0){let a=`/palpites?rodada=${e}`;C(!1),window.location.search.includes("participante")&&(a+=`&participante=${n}`),d.Inertia.get(a,{},{preserveScroll:!0})}},I=e=>{const a={jogo_id:e.id,user_id:c.id,inicio_jogo:e.inicio,palpite_casa:i.casa,palpite_fora:i.fora};e.palpite?d.Inertia.visit(`/palpites/${e.palpite.id}`,{method:"PUT",data:a,preserveScroll:!0,onStart:()=>f(!0),onFinish:()=>f(!1)}):d.Inertia.visit("/palpites",{method:"POST",data:a,preserveScroll:!0,onStart:()=>f(!0),onFinish:()=>f(!1)})},w=({palpite:e,inicio_timestamp:a})=>{const l=e&&e.palpite_casa!==null,r=e&&e.palpite_fora!==null;return!!(!l&&!r&&o(a))},F=({palpite:e},a)=>{const l=c.id===+n,r=e===null||e[`palpite_${a}`]===null;return l&&r},o=e=>new Date().getTime()>e*1e3,T=e=>{if(c.id===+n&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if((a||l)&&!o(e.inicio_timestamp))return!0}return!1},B=e=>{if(c.id===+n&&e.palpite){const a=e.palpite.palpite_casa!==null,l=e.palpite.palpite_fora!==null;if(a&&l&&o(e.inicio_timestamp))return!0}return!1},D=({placar_casa:e,placar_fora:a,palpite:l})=>{const r=e!==null,s=a!==null,X=l&&l.palpite_casa!==null,z=l&&l.palpite_fora!==null;if(r&&s&&X&&z){const h=l.palpite_casa,_=l.palpite_fora,U=e===l.palpite_casa,V=a===l.palpite_fora,O=e>a&&h>_,G=a>e&&_>h,H=e===a&&h===_;if(U&&V)return"flex flex-col gap-1 bg-green-100";if(O||G||H)return"flex flex-col gap-1 bg-yellow-50"}else return"flex flex-col gap-1"};return t.createElement(t.Fragment,null,t.createElement("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg text-gray-600"},(x.length>0||m>0)&&t.createElement("div",{className:"flex flex-wrap-reverse items-center justify-between"},t.createElement("div",null,t.createElement("div",{className:v?"vb-btn-group open":"vb-btn-group"},t.createElement("button",{onClick:()=>N(+m-1),disabled:+m==1},J),t.createElement("button",{onClick:()=>C(!v)},t.createElement("span",{className:"flex items-center justify-center"},m,"\xAA Rodada ",K)),t.createElement("button",{onClick:()=>N(+m+1),disabled:u.qtd_rodadas===+m},M)),v&&t.createElement("div",{className:"vb-dropdown"},[...Array(u.qtd_rodadas).keys()].map((e,a)=>t.createElement("button",{key:a,onClick:()=>N(e+1)},e+1,"\xAA")))),t.createElement("div",{className:"w-[18.5rem] p-3 pb-0 sm:px-6 sm:pt-6"},t.createElement("select",{name:"users",onChange:q,defaultValue:n,className:"vb-custom-input"},$.map((e,a)=>t.createElement("option",{key:a,value:e.user_id},e.name))))),x.length>0?t.createElement("div",{className:"p-3 sm:p-6 border-gray-200"},t.createElement("div",{className:"flex justify-between flex-row border-b-2 p-2 font-bold bg-slate-800 text-white rounded-t-lg"},t.createElement("div",{className:"px-2 text-center"},"Status"),t.createElement("div",{className:"px-2 flex text-center truncate"},"Palpites"),t.createElement("div",{className:"px-2 text-center"},"A\xE7\xF5es")),x.map((e,a)=>{var l,r;return t.createElement("div",{key:a,className:D(e)},t.createElement("div",{className:"flex text-sm justify-center pt-2 gap-1"},t.createElement("strong",{className:"capitalize"},b?"Salvando...":e.inicio_format)),t.createElement("div",{className:"flex items-center justify-between border-b-2 pb-2 gap-2"},t.createElement("div",{className:"text-center"},e.palpite&&(e.palpite.palpite_casa!==null||e.palpite.palpite_fora!==null)?Q:W),t.createElement("div",{className:"flex items-center justify-center gap-2"},t.createElement("div",{className:"flex items-center gap-2"},t.createElement("span",{className:"vb-sigla-time"},e.timecasa.sigla),t.createElement("span",{className:"w-24 hidden sm:flex justify-end"},e.timecasa.nome),t.createElement("img",{alt:e.timecasa.nome,className:"vb-escudo-time",src:e.timecasa.escudo_url})),t.createElement("div",{className:"flex items-center gap-2"},F(e,"casa")?t.createElement("input",{min:"0",type:"number",name:"palpite_casa",className:"vb-input-jogos",onBlur:s=>S(s,e),disabled:b||w(e),onChange:s=>g(s,e)}):t.createElement("span",{className:"vb-placar-number"},c.id!==+n&&!o(e.inicio_timestamp)?e.palpite?"X":"":(l=e==null?void 0:e.palpite)==null?void 0:l.palpite_casa),t.createElement("span",null,"x"),c.id===+n&&w(e)&&t.createElement("strong",{className:"vb-expired"},"Esgotado!"),F(e,"fora")?t.createElement("input",{min:"0",type:"number",name:"palpite_fora",className:"vb-input-jogos",onBlur:s=>S(s,e),disabled:b||w(e),onChange:s=>g(s,e)}):t.createElement("span",{className:"vb-placar-number"},c.id!==+n&&!o(e.inicio_timestamp)?e.palpite?"X":"":(r=e==null?void 0:e.palpite)==null?void 0:r.palpite_fora)),t.createElement("div",{className:"flex items-center gap-2"},t.createElement("img",{alt:e.timefora.nome,className:"vb-escudo-time",src:e.timefora.escudo_url}),t.createElement("span",{className:"w-24 hidden sm:flex"},e.timefora.nome),t.createElement("span",{className:"vb-sigla-time"},e.timefora.sigla))),t.createElement("div",{className:"w-6"},T(e)&&t.createElement("button",{onClick:()=>I(e)},Y),B(e)&&t.createElement("button",{onClick:()=>P(e)},Z))))}),t.createElement("div",{className:"pt-9"},t.createElement("h4",{className:"font-bold text-lg pb-1"},"Legenda"),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-green-100 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Exato (",u.placar_exato," pontos)")),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("span",{className:"w-4 h-4 bg-yellow-50 border-[1px] border-gray-400"}),t.createElement("p",null,"- Placar Vencedor (",u.placar_vencedor," pontos)")))):t.createElement("div",{id:"box-empty"},"N\xE3o existem dados para listar!")),y.length>0&&t.createElement("div",{className:"absolute grid place-content-center inset-0 w-full h-screen bg-[#000000bf] z-[100]"},t.createElement("div",{className:"w-[90vw] sm:w-[600px] bg-white shadow-md rounded-t-xl rounded-b-lg text-gray-600"},t.createElement("h1",{className:"flex justify-between font-bold text-xl text-center bg-slate-800 text-white p-4 rounded-t-lg"},t.createElement("span",{className:""}),t.createElement("span",{className:"flex items-center justify-center"},`${((A=p==null?void 0:p.timecasa)==null?void 0:A.nome)||""} vs ${((k=p==null?void 0:p.timefora)==null?void 0:k.nome)||""}`),t.createElement("span",{className:""},t.createElement("button",{className:"p-2 bg-gray-100 rounded-[50%] text-slate-800",onClick:()=>P(null)},j))),t.createElement("ul",{className:"h-[80vh] divide-y overflow-y-auto py-2 px-4"},y.map((e,a)=>t.createElement("li",{key:a,className:"flex justify-between py-2"},t.createElement("div",{className:"w-[10%]"},a+1),t.createElement("div",{className:"w-[60%]"},e.user.name),t.createElement("div",{className:"w-[30%] text-center"},e.palpite_casa," x ",e.palpite_fora)))))))};export{ae as default};
