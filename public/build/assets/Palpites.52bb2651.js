import{R as i,r as R,d as b}from"./app.8ef92b6b.js";import{d as H,A as J,a as K,b as Q,C as W,c as Y,E as Z,L as j}from"./helpers.8b9d716c.js";const ee=({jogo:l,list:m,handleClose:N})=>{var c,w;const E=(a,r,n)=>{let o="w-[30%] text-center rounded-md";const h=a!==null,y=r!==null,k=n&&n.palpite_casa!==null,p=n&&n.palpite_fora!==null;if(h&&y&&k&&p){const x=n.palpite_casa,f=n.palpite_fora,C=a===n.palpite_casa,P=r===n.palpite_fora,g=a>r&&x>f,_=r>a&&f>x;C&&P?o+=" bg-green-100 dark:bg-green-400 dark:text-slate-800":(g||_||a===r&&x===f)&&(o+=" bg-yellow-50 dark:bg-yellow-500 dark:text-slate-800")}return o};return i.createElement("div",{className:"absolute grid place-content-center inset-0 w-full h-screen bg-[#000000bf] z-[100]"},i.createElement("div",{className:"w-[90vw] sm:w-[600px] bg-white dark:bg-slate-800 shadow-md rounded-t-xl rounded-b-lg text-gray-600 dark:text-slate-300"},i.createElement("h1",{className:"flex justify-between font-bold text-xl text-center bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-t-lg"},i.createElement("span",{className:""}),i.createElement("span",{className:"flex items-center justify-center"},`${((c=l==null?void 0:l.timecasa)==null?void 0:c.nome)||""} vs ${((w=l==null?void 0:l.timefora)==null?void 0:w.nome)||""}`),i.createElement("span",{className:""},i.createElement("button",{onClick:()=>N(null),className:"p-2 bg-gray-100 rounded-[50%] text-slate-800"},H))),i.createElement("ul",{className:"h-[80vh] divide-y overflow-y-auto py-2 px-4"},m.map((a,r)=>i.createElement("li",{key:r,className:"flex justify-between p-2 font-bold border-gray-700"},i.createElement("div",{className:"w-[10%]"},r+1),i.createElement("div",{className:"w-[60%]"},a.user.name),i.createElement("div",{className:E(l.placar_casa,l.placar_fora,a)},a.palpite_casa," x ",a.palpite_fora))))))},se=({user:l,bolao:m,compare:N,jogos:E,rodada:c,participantes:w,selected:a})=>{const[r,n]=R.exports.useState(!1),[o,h]=R.exports.useState(!1),[y,k]=R.exports.useState(!1),[p,x]=R.exports.useState({jogo:0,casa:null,fora:null}),f=R.exports.useRef(),C=(e,t)=>{(p.jogo===0||t.id===p.jogo)&&x({...p,jogo:t.id,[e.target.name.split("_")[1]]:+e.target.value})},P=e=>{if(e.target.value>0){let t=`/palpites?participante=${e.target.value}`;window.location.search.includes("rodada")&&(t+=`&rodada=${c}`),b.Inertia.get(t,{},{preserveScroll:!0})}},g=(e,t)=>{t.id===p.jogo&&p.casa!==null&&p.fora!==null&&T(t)},_=e=>{e?(k(e),b.Inertia.get(`/palpites?rodada=${c}&compare=${e.id}`,{},{preserveState:!0})):b.Inertia.get(`/palpites?rodada=${c}`)},$=()=>{h(!o),!o&&m.rodada>16&&setTimeout(()=>{f.current.scrollTo({top:48*(m.rodada/4),behavior:"smooth"})},500)},S=e=>{if(e>0){let t=`/palpites?rodada=${e}`;h(!1),window.location.search.includes("participante")&&(t+=`&participante=${a}`),b.Inertia.get(t,{},{preserveScroll:!0})}},T=e=>{const t={jogo_id:e.id,user_id:l.id,inicio_jogo:e.inicio,palpite_casa:p.casa,palpite_fora:p.fora};e.palpite?b.Inertia.visit(`/palpites/${e.palpite.id}`,{method:"PUT",data:t,preserveScroll:!0,onStart:()=>n(!0),onFinish:()=>n(!1)}):b.Inertia.visit("/palpites",{method:"POST",data:t,preserveScroll:!0,onStart:()=>n(!0),onFinish:()=>n(!1)})},F=({palpite:e,inicio_timestamp:t})=>{const s=e&&e.palpite_casa!==null,u=e&&e.palpite_fora!==null;return!!(!s&&!u&&v(t))},q=({palpite:e},t)=>{const s=l.id===+a,u=e===null||e[`palpite_${t}`]===null;return s&&u},v=e=>new Date().getTime()>e*1e3,D=e=>{if(l.id===+a&&e.palpite){const t=e.palpite.palpite_casa!==null,s=e.palpite.palpite_fora!==null;if((t||s)&&!v(e.inicio_timestamp))return!0}return!1},L=e=>{if(l.id===+a&&e.palpite){const t=e.palpite.palpite_casa!==null,s=e.palpite.palpite_fora!==null;if(t&&s&&v(e.inicio_timestamp))return!0}return!1},z=({placar_casa:e,placar_fora:t,palpite:s})=>{const u=e!==null,d=t!==null,B=s&&s.palpite_casa!==null,X=s&&s.palpite_fora!==null;if(u&&d&&B&&X){const I=s.palpite_casa,A=s.palpite_fora,O=e===s.palpite_casa,U=t===s.palpite_fora,V=e>t&&I>A,M=t>e&&A>I,G=e===t&&I===A;if(O&&U)return"flex flex-col gap-1 bg-green-100 dark:bg-green-400 dark:text-slate-800";if(V||M||G)return"flex flex-col gap-1 bg-yellow-50 dark:bg-yellow-500 dark:text-slate-800"}else return"flex flex-col gap-1"};return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-white dark:bg-slate-800 text-gray-600 dark:text-slate-300 overflow-hidden shadow-sm sm:rounded-lg"},(E.length>0||c>0)&&React.createElement("div",{className:"flex flex-wrap-reverse items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:o?"vb-btn-group open":"vb-btn-group"},React.createElement("button",{onClick:()=>S(+c-1),disabled:+c==1},J),React.createElement("button",{onClick:$},React.createElement("span",{className:"flex items-center justify-center"},c,"\xAA Rodada ",K)),React.createElement("button",{onClick:()=>S(+c+1),disabled:m.qtd_rodadas===+c},Q)),o&&React.createElement("div",{ref:f,className:"vb-dropdown"},[...Array(m.qtd_rodadas).keys()].map((e,t)=>React.createElement("button",{key:t,onClick:()=>S(e+1),className:m.rodada===e+1?"active":""},e+1,"\xAA")))),React.createElement("div",{className:"w-[18.5rem] p-3 pb-0 sm:px-6 sm:pt-6"},React.createElement("select",{name:"users",onChange:P,defaultValue:a,className:"vb-custom-input dark:bg-slate-800"},w.map((e,t)=>React.createElement("option",{key:t,value:e.user_id},e.name))))),E.length>0?React.createElement("div",{className:"p-3 sm:p-6 border-gray-200"},React.createElement("div",{className:"flex justify-between flex-row border-b-2 p-2 font-bold bg-slate-800 dark:bg-slate-900 text-white rounded-t-lg dark:border-slate-500"},React.createElement("div",{className:"px-2 text-center"},"Status"),React.createElement("div",{className:"px-2 flex text-center truncate"},"Palpites"),React.createElement("div",{className:"px-2 text-center"},"A\xE7\xF5es")),E.map((e,t)=>{var s,u;return React.createElement("div",{key:t,className:z(e)},React.createElement("div",{className:"flex text-sm justify-center pt-2 gap-1"},React.createElement("strong",{className:"capitalize"},r?React.createElement("strong",{className:"capitalize"},"Salvando..."):React.createElement("strong",{className:"capitalize"},`${m.termino} 23:59:00`==e.inicio?"DATA INDEFINIDA":e.inicio_format))),React.createElement("div",{className:"flex px-2 items-center justify-between border-b-2 pb-2 gap-2 dark:border-slate-500"},React.createElement("div",{className:"text-center"},e.palpite&&(e.palpite.palpite_casa!==null||e.palpite.palpite_fora!==null)?W:Y),React.createElement("div",{className:"flex items-center justify-center gap-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"vb-sigla-time"},e.timecasa.sigla),React.createElement("span",{className:"w-48 hidden sm:flex justify-end truncate"},e.timecasa.nome),React.createElement("img",{alt:e.timecasa.nome,className:"vb-escudo-time",src:e.timecasa.escudo_url})),React.createElement("div",{className:"flex items-center gap-2"},q(e,"casa")?React.createElement("input",{min:"0",type:"number",name:"palpite_casa",className:"vb-input-jogos",onBlur:d=>g(d,e),disabled:r||F(e),onChange:d=>C(d,e)}):React.createElement("span",{className:"vb-placar-number"},l.id!==+a&&!v(e.inicio_timestamp)?e.palpite?"X":"":(s=e==null?void 0:e.palpite)==null?void 0:s.palpite_casa),React.createElement("span",null,"x"),l.id===+a&&F(e)&&React.createElement("strong",{className:"vb-expired"},"Esgotado!"),q(e,"fora")?React.createElement("input",{min:"0",type:"number",name:"palpite_fora",className:"vb-input-jogos",onBlur:d=>g(d,e),disabled:r||F(e),onChange:d=>C(d,e)}):React.createElement("span",{className:"vb-placar-number"},l.id!==+a&&!v(e.inicio_timestamp)?e.palpite?"X":"":(u=e==null?void 0:e.palpite)==null?void 0:u.palpite_fora)),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("img",{alt:e.timefora.nome,className:"vb-escudo-time",src:e.timefora.escudo_url}),React.createElement("span",{className:"w-48 hidden sm:flex truncate"},e.timefora.nome),React.createElement("span",{className:"vb-sigla-time"},e.timefora.sigla))),React.createElement("div",{className:"w-6"},D(e)&&React.createElement("button",{onClick:()=>T(e)},Z),L(e)&&React.createElement("button",{onClick:()=>_(e)},j))))}),React.createElement("div",{className:"pt-9"},React.createElement("h4",{className:"font-bold text-lg pb-1"},"Legenda"),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("span",{className:"w-4 h-4 bg-green-100 dark:bg-green-400 border-[1px] border-gray-400"}),React.createElement("p",null,"- Placar Exato (",m.placar_exato," pontos)")),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("span",{className:"w-4 h-4 bg-yellow-50 dark:bg-yellow-500 border-[1px] border-gray-400"}),React.createElement("p",null,"- Placar Vencedor (",m.placar_vencedor," pontos)")))):React.createElement("div",{id:"box-empty"},"N\xE3o existem dados para listar!")),N.length>0&&React.createElement(ee,{jogo:y,list:N,handleClose:_}))};export{se as default};
